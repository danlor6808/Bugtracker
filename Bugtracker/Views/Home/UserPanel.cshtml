@model IEnumerable<Bugtracker.Models.Project>
@using Microsoft.AspNet.Identity;

<!-- Small boxes (Stat box) -->
<div class="row">
    <!--Pie Chart-->
    <div class="col-xs-12">
            <div class="box-body">
                <div class="col-sm-3">
                    <!-- Projects-->

                        <div class="small-box bg-aqua">
                            <div class="inner">
                                <h3>@ViewBag.TotalProjects.Count</h3>
                                <p style="z-index:10">Total Projects</p>
                            </div>
                            <div class="icon">
                                <i class="fa fa-table"></i>
                            </div>
                        </div>

                    <!--Tickets -->

                        <div class="small-box bg-green">
                            <div class="inner">
                                <h3>@ViewBag.TotalTickets.Count</h3>
                                <p style="z-index:10">Total Tickets</p>
                            </div>
                            <div class="icon">
                                <i class="ion ion-stats-bars"></i>
                            </div>
                        </div>

                        <!--Tickets Complete-->

                        <div class="small-box bg-red">
                            <div class="inner">
                                <h3>@ViewBag.CompletedTickets<sup style="font-size: 20px">%</sup></h3>
                                <p style="z-index:10">Completion of Tickets</p>
                            </div>
                            <div class="icon">
                                <i class="ion ion-pie-graph"></i>
                            </div>
                        </div>

                        <!--Total Users-->

                        <div class="small-box bg-yellow">
                            <div class="inner">
                                <h3>@ViewBag.TotalUsers.Count</h3>
                                <p style="z-index:10">Total Users</p>
                            </div>
                            <div class="icon">
                                <i class="ion ion-person-add"></i>
                            </div>
                        </div>

                </div>
                <div class="col-sm-9">
                    <div class="box box-danger">
                        <div class="box-header with-border">
                            <h3 class="box-title">Statistics</h3>
                            <div class="box-tools pull-right">
                                <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i></button>
                                <button class="btn btn-box-tool" data-widget="remove"><i class="fa fa-times"></i></button>
                            </div>
                        </div>
                        <div class="box-body">
                            <canvas id="pieChart"></canvas>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div><!-- /.row -->




@section CustomCSS{

}

@section CustomJS{
    <!-- SlimScroll -->
    <script src="~/plugins/slimScroll/jquery.slimscroll.min.js"></script>
    <!-- FastClick -->
    <script src="~/plugins/fastclick/fastclick.min.js"></script>
    <script src="~/plugins/chartjs/Chart.min.js"></script>

    <script>
        $(function() {
            //-------------
            //- PIE CHART -
            //-------------
            // Get context with jQuery - using jQuery's .get() method.
            var pieChartCanvas = $("#pieChart").get(0).getContext("2d");
            var pieChart = new Chart(pieChartCanvas);
            var PieData = [
              {
                  value: @ViewBag.CompleteTicketsStatic,
                  color: "#f56954",
                  highlight: "#f56954",
                  label: "Completed Tickets"
              },
              {
                  value: @ViewBag.TotalTickets.Count,
                  color: "#00a65a",
                  highlight: "#00a65a",
                  label: "Total Tickets"
              },
              {
                  value: @ViewBag.TotalUsers.Count,
                  color: "#f39c12",
                  highlight: "#f39c12",
                  label: "Total Users"
              },
              {
                  value: @ViewBag.TotalProjects.Count,
                  color: "#00c0ef",
                  highlight: "#00c0ef",
                  label: "Total Projects"
              },
            ];
            var pieOptions = {
                //Boolean - Whether we should show a stroke on each segment
                segmentShowStroke: true,
                //String - The colour of each segment stroke
                segmentStrokeColor: "#fff",
                //Number - The width of each segment stroke
                segmentStrokeWidth: 2,
                //Number - The percentage of the chart that we cut out of the middle
                percentageInnerCutout: 50, // This is 0 for Pie charts
                //Number - Amount of animation steps
                animationSteps: 100,
                //String - Animation easing effect
                animationEasing: "easeOutBounce",
                //Boolean - Whether we animate the rotation of the Doughnut
                animateRotate: true,
                //Boolean - Whether we animate scaling the Doughnut from the centre
                animateScale: false,
                //Boolean - whether to make the chart responsive to window resizing
                responsive: true,
                // Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container
                maintainAspectRatio: true,
                //String - A legend template
                legendTemplate: "<ul class=\"<%=name.toLowerCase()%>-legend\"><% for (var i=0; i<segments.length; i++){%><li><span style=\"background-color:<%=segments[i].fillColor%>\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>"
            };
            pieChart.Doughnut(PieData, pieOptions);
        });
    </script>
    }